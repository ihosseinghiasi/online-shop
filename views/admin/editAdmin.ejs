<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/adminPanelAddAdmin.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <title>‍ پنل مدیریت </title>
</head>
<body onload="getcheckBoxes()">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
     integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
     crossorigin="anonymous">
    </script>

    <header>
            <div class="container bg-light navbarPanel">
                <div class="title my-3">
                    <h2>مدیریت سایت</h2>
                </div>
              <div class="d-flex justify-content-end navbarItems">
                <img src="/pictures/menProfile.svg" class="mx-5 my-2 imageSize" alt="contact">
                <a href="#" class="position-relative my-2">
                  <img src="/icons/mail.svg" class="ms-3 my-3 iconSize" alt="mail">
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning my-3 text-light" 
                  style="width: 33px; padding: 5px;">
                    17
                    <span class="visually-hidden">unread messages</span>
                  </span> 
                </a>
                <a href="#" class="position-relative my-2">
                    <img src="/icons/shopping-bag.svg" class="ms-5 my-3 iconSize" alt="shopping-bag">
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning my-3 text-light" 
                    style="width: 33px; padding: 5px;">
                      23
                      <span class="visually-hidden">unread messages</span>
                    </span> 
                  </a>  
            </div>
            </div>
    </header>

    <div class="container container-fluid">
        <div class="row ">
            <div class="col-2 sideMenu bg-secondary text-light">

                <div class="row row-cols-1">
                    <div class="col picureLogo">
                        <img src="/pictures/menProfile.svg" alt="profile" class="profileLogo">
                    </div>

                    <a href="/admin-cPanel/counter">
                        <div class="col items">
                            <div class="mt-2 mx-1" style="display: inline-block;">
                                <img src="/icons/home.svg" alt="home">
                            </div>
                            <div style="display: inline-block;" class="my-3 mx-1">
                                <p>پیشخوان</p>
                            </div>
                        </div>
                    </a>

                    <div class="col items" data-bs-toggle="collapse" href="#collapseAdmin"
                     role="button" aria-expanded="true" aria-controls="collapseAdmin">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/user-check.svg" alt="admin">
                        </div>
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>مدیران سایت</p>
                        </div>
                    </div>
                    <a href="/admin-cPanel/admin/showAdmins">
                        <div class="collapse show" id="collapseAdmin">
                            <div class="col items selectedMenu">
                              <div class="mt-2 me-4" style="display: inline-block;">
                                  <img src="/icons/users.svg" alt="users">
                              </div>
                              <div style="display: inline-block;" class="my-2 mx-1">
                                  <p>مدیران سایت</p>
                              </div>
                        </div>
                    </a>
                      <a href="/admin-cPanel/admin/newAdmin">
                        <div class="col items" >
                        <div class="mt-2 me-4" style="display: inline-block;">
                            <img src="/icons/user-plus.svg" alt="addAdmin">
                        </div>
                            <div style="display: inline-block;" class="my-2 mx-1">
                                <p>افزودن مدیر</p>
                            </div>    
                        </div>
                       </a>    
                      </div>

                      <div class="col items" data-bs-toggle="collapse" href="#collapseUser"
                      role="button" aria-expanded="false" aria-controls="collapseUser">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/user.svg" alt="user">
                        </div>
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>کاربران سایت</p>
                        </div>
                    </div>
                    <a href="/admin-cPanel/user/showUsers">
                        <div class="collapse" id="collapseUser">
                            <div class="col items">
                              <div class="mt-2 me-4" style="display: inline-block;">
                                  <img src="/icons/users.svg" alt="users">
                              </div>
                              <div style="display: inline-block;" class="my-2 mx-1">
                                  <p>کاربران سایت</p>
                              </div>
                    </a>
                        </div>
                        <a href="/admin-cPanel/user/newUser">
                            <div class="col items" >
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/user-plus.svg" alt="addUser">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                    <p>افزودن کاربر</p>
                                </div>
                              </div>
                        </a>
                    </div>

                    <div class="col items" data-bs-toggle="collapse" href="#collapseCategory"
                    role="button" aria-expanded="false" aria-controls="collapseCategory">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/category.svg" alt="category">
                        </div>    
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>دسته بندی ها</p>
                        </div>
                    </div>
                    <div class="collapse" id="collapseCategory">
                        <a href="/admin-cPanel/category/showCategories">
                            <div class="col items">
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/categoryMini.svg" alt="users">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                  <p>دسته بندی ها</p>
                                </div>
                              </div>
                        </a>
                        <a href="/admin-cPanel/category/newCategory">
                            <div class="col items" >
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/plus-square.svg" alt="addCategory">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                    <p>افزودن دسته بندی</p>
                                </div>
                              </div>
                        </a>
                    </div>

                    <div class="col items" data-bs-toggle="collapse" href="#collapseProduct"
                    role="button" aria-expanded="false" aria-controls="collapseProduct">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/product.svg" alt="product">
                        </div>
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>محصولات</p>
                        </div>
                    </div>
                    <div class="collapse" id="collapseProduct">
                        <a href="/admin-cPanel/product/showProducts">
                            <div class="col items">
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/productMini.svg" alt="products">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                  <p>محصولات</p>
                                </div>
                              </div>
                        </a>
                        <a href="/admin-cPanel/product/newProduct">
                            <div class="col items" >
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/plus-square.svg" alt="addProduct">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                    <p>افزودن محصول/p>
                                </div>
                              </div>
                        </a>
                    </div>

                    <div class="col items" data-bs-toggle="collapse" href="#collapseCard"
                    role="button" aria-expanded="false" aria-controls="collapseCard">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/credit-card.svg" alt="card">
                        </div>
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p> کارت ها </p>
                        </div>
                    </div>
                    <div class="collapse" id="collapseCard">
                       <a href="">
                        <div class="col items">
                            <div class="mt-2 me-4" style="display: inline-block;">
                                <img src="/icons/credit-card.svg" alt="card">
                            </div>
                            <div style="display: inline-block;" class="my-2 mx-1">
                              <p> کارت ها </p>
                            </div>
                          </div>
                       </a>
                        <a href="/admin-Cpanel/card/newCard">
                            <div class="col items" >
                                <div class="mt-2 me-4" style="display: inline-block;">
                                    <img src="/icons/plus-square.svg" alt="addCard">
                                </div>
                                <div style="display: inline-block;" class="my-2 mx-1">
                                    <p> افزودن کارت </p>
                                </div>
                              </div>
                        </a>
                    </div>

                    
                    <div class="col items">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/inbox.svg" alt="email">
                        </div>
                      
                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>ایمیل ها</p>
                        </div>
                    </div>
                    <div class="col items">
                        <div class="mt-2 mx-1" style="display: inline-block;">
                            <img src="/icons/message-square.svg" alt="ticket">
                        </div>

                        <div style="display: inline-block;" class="my-3 mx-1">
                            <p>تیکت ها</p>
                        </div>
                    </div>
                    <div class="col items">
                        <div class="mt-3 mx-1" style="display: inline-block; height: 100%;">
                            <img src="/icons/pie-chart.svg" alt="report">
                        </div>

                        <div style="display: inline-block;" class="mt-3 mx-1">
                            <p>گزارش گیری</p>
                        </div>
                    </div>
                    <div class="col items">
                        <div class="mt-3 mx-1" style="display: inline-block; height: 100%;">
                            <img src="/icons/settings.svg" alt="settings">
                        </div>

                        <div style="display: inline-block;" class="mt-3 mx-1">
                            <p>تنظیمات</p>
                        </div>
                    </div>
                    <div class="col items"></div>
                </div>
            </div>


            <div class="col-10">
                <div class="col-11 mx-5 counter">
                    <div class="titleCounter">
                        <p>پیشخوان  >  مدیران سایت  >  ویرایش مدیر</p>
                    </div>
                    <div class="d-flex justify-content-start parsianDate">
                       <p><%= persianDate %></p>
                    </div>
                </div>

                <% if(locals.errors) { %>
                    <div class="col-5 mx-5 mt-3">
                        <% Object.values(errors).forEach((error) =>{ %>
                            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                <%= error.msg %>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        <% }) %>
                    </div>
                <% } %> 

                <div class="addAdmin col-11 my-5 mx-5">
                    <div class="addtitle my-3 mx-2 col-8">
                        <img src="/icons/plus-square-black.svg"  alt="افزودن مدیر ">
                        ویرایش مدیر
                    </div>
               
                    <div class="addBody col-8 mx-5">
                        <form action="/admin-cPanel/admin/editAdmin/<%= admin.id %>?_method=PUT" method="post">
                            <div class="row g-2" >
                                <div class="mx-3 col-5">  
                                    <input type="text" class="form-control mt-3"  placeholder="نام" name="firstName" value="<%= admin.firstName %>">
                                    <input type="text" class="form-control mt-3"  placeholder="نام خانوادگی" name="lastName" value="<%= admin.lastName %>">
                                    <input type="email" class="form-control mt-3 enField"  placeholder="ایمیل" name="email" value="<%= admin.email %>">
                                    <select class="form-select mt-3" name="department" id="department" value="<%= admin.department %>">
                                        <option selected>مدیر سایت</option>
                                        <option value="پشتیبان سایت">پشتیبان سایت</option>
                                      </select>
                                    <input type="password" class="form-control mt-3 enField"
                                      placeholder="کلمه عبور" name="password" id="password" value="<%= admin.password %>">
                                            <i class="bi bi-eye-slash passwordEye" id="togglePassword"></i>

                                    <input type="password" class="form-control mt-3 enField"
                                      placeholder="تکرار کلمه عبور" name="confirmPassword" id="confirmPassword" value="<%= admin.password %>">
                                      <i class="bi bi-eye-slash confirmPasswordEye" id="toggleConfirmPassword"></i>
                                </div>

                                <div class="mx-3 col-5">
                                    دسترسی ها :
                                    <br><br><br>

                                    <div class="form-check form-switch float-end">
                                            <input type="checkbox" class="btn-check" id="chkAdmin" name="isAdmin" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkAdmin">مدیران</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end  my-1">
                                            <input type="checkbox" class="btn-check" id="chkProduct" name="isProduct" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkProduct">محصولات</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end my-1 ">
                                            <input type="checkbox" class="btn-check" id="chkOrder" name="isOrder" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkOrder">سفارش ها</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end my-1">
                                            <input type="checkbox" class="btn-check" id="chkEmail" name="isEmail" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkEmail">ایمیل ها</label><br>                                        
                                          </div>
                                        <div class="form-check form-switch float-end my-1">
                                            <input type="checkbox" class="btn-check" id="chkReport" name="isReport" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkReport">گزارشات</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end my-1">
                                            <input type="checkbox" class="btn-check" id="chkTicket" name="isTicket" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkTicket">تیکت ها</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end my-1">
                                            <input type="checkbox" class="btn-check" id="chkCategory" name="isCategory" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkCategory">دسته بندی ها</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end my-1">
                                            <input type="checkbox" class="btn-check" id="chkUser" name="isUser" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkUser">کاربران</label><br>                                        
                                          </div>
                                          <div class="form-check form-switch float-end mt-1 mb-5">
                                            <input type="checkbox" class="btn-check" id="chkSetting" name="isSetting" autocomplete="off">
                                            <label class="btn btn-outline-success" for="chkSetting">تنظیمات</label><br>                                        
                                          </div> 
                                          <div class="mt-5 mx-5">
                                            <div class="col-8 mt-5 mx-5">
                                                <input type="submit" value="ویرایش" class="mt-3 mx-5 btn btn-success btn-lg">
                                            </div> 
                                        </div>    
                                        </div>
                                    </div>
                                </form>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
     </div>
    <footer>
    </footer>
    <script>

        function getcheckBoxes() {
            const checkAdmin = "<%= JSON.parse(JSON.stringify(admin.isAdmin)) %>"
            if (checkAdmin === "on") {
                document.getElementById('chkAdmin').checked = true
            }

            const checkProduct = "<%= JSON.parse(JSON.stringify(admin.isProduct)) %>"
            if (checkProduct === "on") {
                document.getElementById('chkProduct').checked = true
            }

            let checkOrder = "<%= JSON.parse(JSON.stringify(admin.isOrder)) %>"
            if (checkOrder === "on") {
                document.getElementById('chkOrder').checked = true
            }

            let checkEmail = "<%= JSON.parse(JSON.stringify(admin.isEmail)) %>"
            if (checkEmail === "on") {
                document.getElementById('chkEmail').checked = true
            }

            let checkReport = "<%= JSON.parse(JSON.stringify(admin.isReport)) %>"
            if (checkReport === "on") {
                document.getElementById('chkReport').checked = true
            }

            let checkTicket = "<%= JSON.parse(JSON.stringify(admin.isTicket)) %>"
            if (checkTicket === "on") {
                document.getElementById('chkTicket').checked = true
            }

            let checkCategory = "<%= JSON.parse(JSON.stringify(admin.isCategory)) %>"
            if (checkCategory === "on") {
                document.getElementById('chkCategory').checked = true
            }

            let checkUser = "<%= JSON.parse(JSON.stringify(admin.isUser)) %>"
            if (checkUser === "on") {
                document.getElementById('chkUser').checked = true
            }

            let checkSetting = "<%= JSON.parse(JSON.stringify(admin.isSetting)) %>"
            if (checkSetting === "on") {
                document.getElementById('chkSetting').checked = true
            }
        }

    </script>

<script>
    window.addEventListener('load', (event)=> {
        const selectedItem = String("<%= admin.department %>")
        document.getElementById('department').value = selectedItem
    })
</script>

<script>
    const togglePassword = document.querySelector("#togglePassword");
     const password = document.querySelector("#password");

     togglePassword.addEventListener("click", function () {
         // toggle the type attribute
         const type = password.getAttribute("type") === "password" ? "text" : "password";
         password.setAttribute("type", type);
         
         // toggle the icon
         this.classList.toggle("bi-eye");
     });
</script>

<script>
    const toggleConfirmPassword = document.querySelector("#toggleConfirmPassword");
    const confirmPassword = document.querySelector("#confirmPassword");

    toggleConfirmPassword.addEventListener("click", function () {
        // toggle the type attribute
        const type = confirmPassword.getAttribute("type") === "password" ? "text" : "password";
        confirmPassword.setAttribute("type", type);
        
        // toggle the icon
        this.classList.toggle("bi-eye");
    });

</script>

   
</body>
</html
